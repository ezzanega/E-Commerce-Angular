<div class="breadcrumb-area bg-gray-4 breadcrumb-padding-1">
  <div class="container">
    <div class="breadcrumb-content text-center">
      <h2 data-aos="fade-up" data-aos-delay="200">Products</h2>
      <ul data-aos="fade-up" data-aos-delay="400">
        <li><a href="index.html">Home</a></li>
        <li><i class="ti-angle-right"></i></li>
        <li>My Products</li>
      </ul>
    </div>
  </div>
  <div class="breadcrumb-img-1" data-aos="fade-right" data-aos-delay="200">
    <img
      src="https://htmldemo.net/urdan/urdan/assets/images/banner/breadcrumb-1.png"
      alt=""
    />
  </div>
  <div class="breadcrumb-img-2" data-aos="fade-left" data-aos-delay="200">
    <img
      src="https://htmldemo.net/urdan/urdan/assets/images/banner/breadcrumb-2.png"
      alt=""
    />
  </div>
</div>
<div class="pt-80 pb-100">
  <div class="container">
    <div class="row flex-row-reverse">
      <div class="col-12">
        <div class="row mb-4">
          <div class="d-flex justify-content-end">
            <a routerLink="/add-product" class="btn btn-dark">
              <i class="ti-plus"></i> New Product</a>
          </div>
        </div>
        <div class="wishlist-table-content">
          <div *ngIf="SuccessMessage" class="alert alert-success">
            {{ SuccessMessage }}
          </div>
          <div class="table-content table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Image</th>
                  <th scope="col">Name</th>
                  <th scope="col">Price</th>
                  <th scope="col">Old Price</th>
                  <th scope="col">Category</th>
                  <th scope="col">Tags</th>
                  <th scope="col">Description</th>
                  <th scope="col">SKU</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let product of products; let i = index">
                  <th scope="row">{{ i + 1 }}</th>
                  <td>
                    <img
                      [src]="
                        'http://127.0.0.1:8000/storage/' +
                        product.image_initiale
                      "
                      alt="{{ product.nom }}"
                      width="50"
                    />
                  </td>
                  <td>{{ product.nom }}</td>
                  <td>{{ product.prix }} MAD</td>
                  <td
                    ngClass="{{
                      product.old_price ? '' : 'text-center fw-bold'
                    }}"
                  >
                    {{ product.old_price ? product.old_price + " MAD" : "--" }}
                  </td>
                  <td>{{ product.category.name }}</td>
                  <td>{{ product.tag.name }}</td>
                  <td>{{ product.description | truncate : 20 }}</td>
                  <td>{{ product.sku }}</td>
                  <td>
                    <a class="me-2 text-secondary"
                      ><i class="fa fa-pencil-square-o fs-5"></i
                    ></a>
                    <a
                      class="me-2 text-danger"
                      (click)="openDeleteModal(product.id)"
                      ><i class="fa fa-trash-o fs-5"></i
                    ></a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row">
          <div class="d-flex justify-content-between">
            <div class="shop-topbar-left mt-2">
              <div class="showing-item">
                <span>{{ getShowingRange() }}</span>
              </div>
            </div>

            <div class="pagination-style-1">
              <ul>
                <li
                  *ngFor="let page of [].constructor(totalPages); let i = index"
                >
                  <a
                    [class.active]="i + 1 === currentPage"
                    (click)="onPageChange(i + 1)"
                    >{{ i + 1 }}</a
                  >
                </li>
                <li *ngIf="currentPage < totalPages">
                  <a class="next" (click)="onPageChange(currentPage + 1)"
                    ><i class="fa fa-angle-double-right"></i
                  ></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Confirmation Modal -->
<ng-template #deleteModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">Are you sure you want to delete this product?</div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-secondary"
      (click)="modal.dismiss('cancel')"
    >
      Cancel
    </button>
    <button
      type="button"
      class="btn btn-danger"
      (click)="confirmDelete(); modal.close('Ok click')"
    >
      Delete
    </button>
  </div>
</ng-template>
